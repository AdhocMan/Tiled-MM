if(NOT TARGET Tiled-MM::Tiled-MM)
    list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}")
    include(CMakeFindDependencyMacro)

    set(TILEDMM_GPU_BACKEND "@TILEDMM_GPU_BACKEND@")

    if(TILEDMM_GPU_BACKEND STREQUAL "CUDA")
        set(CUDA_PATH "@CUDA_PATH@")
        find_dependency(CUBLAS)
    endif()

    if(TILEDMM_GPU_BACKEND STREQUAL "ROCM")
        find_package(hip CONFIG REQUIRED HINTS $ENV{ROCM_PATH} $ENV{ROCM_HOME} PATHS /opt/rocm PATH_SUFFIXES hip)
        find_package(hipblas CONFIG REQUIRED HINTS $ENV{ROCM_PATH} $ENV{ROCM_HOME} PATHS /opt/rocm PATH_SUFFIXES hipblas)
    endif()

    include("${CMAKE_CURRENT_LIST_DIR}/Tiled-MMTargets.cmake")
endif()
